/* src/app/globals.css */
@import "tailwindcss";

/* Base page setup */
html, body {
  height: 100%;
}

/* Custom theme variables */
:root {
  --facts-bg: 10 10 10;     /* near-black */
  --facts-tint: 20 20 20;   /* charcoal */
  --facts-fg: 245 245 245;

  --story-bg: 7 28 18;      /* deep forest */
  --story-tint: 10 44 26;   /* forest tint */
  --story-fg: 240 253 244;
}

/* =========================
   Typewriter effect (v2)
   - No caret by default
   - Enable caret per line with .typewriter-caret
   - Prevent overflow beyond parent container
   ========================= */

@keyframes typewriter-reveal {
  from { width: 0 }
  to { width: var(--tw-width) }
}

@keyframes typewriter-caret {
  0%, 49% { opacity: 1 }
  50%, 100% { opacity: 0 }
}

/* Base typewriter: reveal only */
.typewriter {
  display: block;
  white-space: nowrap;
  overflow: hidden;

  /* keep inside parent */
  max-width: 100%;

  width: 0;
  border-right: 0;
  animation: typewriter-reveal var(--tw-duration, 2.2s)
    steps(var(--tw-steps, 30), end) forwards;
}

/* Add a blinking caret only when desired */
.typewriter-caret {
  border-right: 2px solid rgba(255, 255, 255, 0.6);
  animation:
    typewriter-reveal var(--tw-duration, 2.2s) steps(var(--tw-steps, 30), end) forwards,
    typewriter-caret 0.9s step-end infinite;
}

.typewriter-muted.typewriter-caret {
  border-right-color: rgba(255, 255, 255, 0.35);
}

/* Divider boot pulse (runs once on load) */
@keyframes divider-boot-pulse {
  0%   { opacity: 0.15; filter: blur(0px); transform: translateX(-50%) scaleY(0.6); }
  35%  { opacity: 0.9;  filter: blur(0.6px); transform: translateX(-50%) scaleY(1.0); }
  65%  { opacity: 0.35; filter: blur(0.2px); transform: translateX(-50%) scaleY(1.0); }
  100% { opacity: 0.15; filter: blur(0px); transform: translateX(-50%) scaleY(1.0); }
}

.divider-boot {
  animation: divider-boot-pulse 900ms ease-out 1;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .typewriter,
  .typewriter-caret {
    width: auto !important;
    max-width: 100% !important;
    border-right: none !important;
    animation: none !important;
  }

  .divider-boot {
    animation: none !important;
  }
}
